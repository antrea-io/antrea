# FeatureGates is a map of feature names to bools that enable or disable experimental features.
featureGates:

# Name of the OpenVSwitch bridge antrea-agent will create and use.
# Make sure it doesn't conflict with your existing OpenVSwitch bridges.
#ovsBridge: br-int

# Name of the interface antrea-agent will create and use for host <--> pod communication.
# Make sure it doesn't conflict with your existing interfaces.
#hostGateway: antrea-gw0

# Encapsulation mode for communication between Pods across Nodes, supported values:
# - geneve (default)
# - vxlan
# - stt
#tunnelType: geneve

# TunnelPort is the destination port for UDP and TCP based tunnel protocols
# (Geneve, VXLAN, and STT). If zero, it will use the assigned IANA port for the
# protocol, i.e. 6081 for Geneve, 4789 for VXLAN, and 7471 for STT.
#tunnelPort: 0

# Default MTU to use for the host gateway interface and the network interface of each Pod.
# If omitted, antrea-agent will discover the MTU of the Node's primary interface and
# also adjust MTU to accommodate for tunnel encapsulation overhead.
#defaultMTU: 0

# The port for the antrea-agent APIServer to serve on.
#apiPort: 10350

# Enable metrics exposure via Prometheus. Initializes Prometheus metrics listener.
#enablePrometheusMetrics: true

# Determines how traffic is encapsulated. It has the following options:
# encap(default):    Inter-node Pod traffic is always encapsulated and Pod to external network
#                    traffic is SNAT'd.
# noEncap:           Inter-node Pod traffic is not encapsulated; Pod to external network traffic is
#                    SNAT'd if noSNAT is not set to true. Underlying network must be capable of
#                    supporting Pod traffic across IP subnets.
# hybrid:            noEncap if source and destination Nodes are on the same subnet, otherwise encap.
#
#trafficEncapMode: encap

# The name of the interface on Node which is used for tunneling or routing the traffic across Nodes.
# If there are multiple IP addresses configured on the interface, the first one is used. The IP
# address used for tunneling or routing traffic to remote Nodes is decided in the following order of
# preference (from highest to lowest):
# 1. transportInterface
# 2. transportInterfaceCIDRs
# 3. The Node IP
#transportInterface:

# The network CIDRs of the interface on Node which is used for tunneling or routing the traffic across
# Nodes. If there are multiple interfaces configured the same network CIDR, the first one is used. The
# IP address used for tunneling or routing traffic to remote Nodes is decided in the following order of
# preference (from highest to lowest):
# 1. transportInterface
# 2. transportInterfaceCIDRs
# 3. The Node IP
#transportInterfaceCIDRs: [<IPv4 CIDR>,<IPv6 CIDR>]

# Fully randomize source port mapping in SNAT rules used for egress traffic from Pods to the
# external network. This feature should be disabled on Windows as it is not supported.
snatFullyRandomPorts: false

# Determines how tunnel traffic is encrypted. Currently encryption only works with encap mode on Linux Nodes.
trafficEncryptionMode: "none"

# This option requires the `AntreaIPAM` feature gate to be enabled. At this moment, it supports only
# IPv4 and Linux Nodes, and can be enabled only when `ovsDatapathType` is `system`,
# `trafficEncapMode` is `noEncap`, and `noSNAT` is true.
enableBridgingMode: false

# Provide the address of Kubernetes apiserver, to override any value provided in kubeconfig or InClusterConfig.
# Defaults to "". It must be a host string, a host:port pair, or a URL to the base of the apiserver.
#kubeAPIServerOverride: ""

# Option antreaProxy contains AntreaProxy related configuration options.
antreaProxy:
  # To disable AntreaProxy, set this to false. It should be enabled on Windows, otherwise NetworkPolicy will
  # not take effect on Service traffic.
  enable: true
  # proxyAll tells antrea-agent to proxy ClusterIP Service traffic, regardless of where they come from.
  # Therefore, running kube-proxy is no longer required. This requires the AntreaProxy feature to be enabled.
  # Note that this option is experimental. If kube-proxy is removed, option kubeAPIServerOverride must be used to access
  # apiserver directly.
  proxyAll: true
  # The value of the "service.kubernetes.io/service-proxy-name" label for AntreaProxy to match. If it is set,
  # then AntreaProxy will only handle Services with the label that equals the provided value. If it is not set,
  # then AntreaProxy will only handle Services without the "service.kubernetes.io/service-proxy-name" label,
  # but ignore Services with the label no matter what is the value.
  serviceProxyName: ""
  # When ProxyLoadBalancerIPs is set to false, AntreaProxy no longer load-balances traffic destined to the
  # External IPs of LoadBalancer Services. This is useful when the external LoadBalancer provides additional
  # capabilities (e.g. TLS termination) and it is desirable for Pod-to-ExternalIP traffic to be sent to the
  # external LoadBalancer instead of being load-balanced to an Endpoint directly by AntreaProxy.
  # For Antrea Windows:
  #   1. If the external LoadBalancer has SNAT enabled and uses an LoadBalancer IP for SNAT, this field MUST be
  #      set to false. Otherwise, Antrea will install a route for the LoadBalancer IP. This route is intended to
  #      forward LoadBalancer traffic sourced from the local Node or an external client to AntreaProxy for
  #      load-balancing. However, it will also match reply traffic that has been SNATed with the LoadBalancer IP by
  #      the external LoadBalancer, causing the reply traffic to be forwarded to an incorrect destination instead of
  #      back to the external LoadBalancer.
  #   2. In other scenarios, when enabling this feature, it can still accelerate traffic when a Pod or local Node
  #      accesses the LoadBalancer IP directly.
  # Note that setting ProxyLoadBalancerIPs to false usually only makes sense when proxyAll is set to true and
  # kube-proxy is removed from the cluster, otherwise kube-proxy will still load-balance this traffic.
  proxyLoadBalancerIPs: false

nodePortLocal:
# Enable NodePortLocal, a feature used to make Pods reachable using port forwarding on the host. To
# enable this feature, you need to set "enable" to true, and ensure that the NodePortLocal feature
# gate is also enabled (which is the default).
#  enable: false
# Provide the port range used by NodePortLocal. When the NodePortLocal feature is enabled, a port
# from that range will be assigned whenever a Pod's container defines a specific port to be exposed
# (each container can define a list of ports as pod.spec.containers[].ports), and all Node traffic
# directed to that port will be forwarded to the Pod.
#  portRange: 40000-41000
